{"ts":1347280981459,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1347280982699,"patch":[[{"diffs":[[1,"//from introduction to canvas http://simonsarris.com/blog/510-making-html5-canvas-useful\n// Constructor for Shape objects to hold data for all drawn objects.\n// For now they will just be defined as rectangles.\nfunction Bullet(x, y, w, angle, fill) {\n  // This is a very simple and unsafe constructor. \n  // All we're doing is checking if the values exist.\n  // \"x || 0\" just means \"if there is a value for x, use that. Otherwise use 0.\"\n  this.x = x || 0;\n  this.y = y || 0;\n  this.w = w || 1;\n  this.origAngle = angle || 0;\n  this.angle = Math.PI  + this.origAngle;\n  this.fill = fill || '#AAAAAA';\n  \n  this.offset = 1;\n}\n \n// Draws this shape to a given context\nBullet.prototype.draw = function(ctx) {\n    ctx.save();\n    \n    \n    context.beginPath();    \n    \n    ctx.translate(game.tower.x, game.tower.y);\n    ctx.rotate(this.angle); \n    ctx.fillStyle = 'rgba(0,245,245, 0.1 )';\n    context.fillRect(0, 0, 200, 200);\n          \n    ctx.fillStyle = this.fill;\n    context.arc( 0, 25+this.offset, this.w, 0, Math.PI * 2, true );\n    context.closePath();\n    context.fill();\n     ctx.restore();\n     \n    this.updatePosition(ctx);\n  //ctx.fillRect(this.x, this.y, this.w, this.h);\n};\n\nBullet.prototype.updatePosition = function(ctx) {\n    //var a = mouse.x - this.x;\n    //var b = mouse.y - this.y;\n    //var tg = a/b;\n    //var atan = -Math.PI*2 - Math.atan(tg);\n    \n    var atan = -(this.origAngle + Math.PI*2);// * Math.PI/180;\n    //console.log('bullet atan', atan);\n    var a_b = Math.tan(atan);\n    var xOffset = a_b / this.offset;\n    \n    this.y = game.tower.y - xOffset ;\n    console.log(this.y);\n    ctx.fillStyle = 'rgba(50,245,245, 0.6 )';\n    ctx.fillRect(this.x - this.w /2, this.y - this.w, this.w, this.w);\n    \n    this.offset += 1;\n};"]],"start1":0,"start2":0,"length1":0,"length2":1757}]],"length":1757,"saved":false}
